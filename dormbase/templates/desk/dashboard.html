{% extends "base.html" %}
{% block content %}

<h1>Desk Dashboard</h1>

<div>
<ul class="nav nav-tabs">
  <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
  <li><a href="#packages" data-toggle="tab">Packages</a></li>
  <li><a href="#guest_list" data-toggle="tab">Guest List</a></li>
  <li><a href="#checkout" data-toggle="tab">Checkout</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="home">
    <div class="row-fluid">
      <div class="span6">
	<div>
	  <h3>Guest Sign-in</h3>
	  <hr>
	  <form class="form-inline">
	    <input type="text" class="input span2" placeholder="Firstname">
	    <input type="text" class="input span2" placeholder="Lastname">
	    <label>&nbsp or &nbsp</label>
	    <input type="text" class="input span4" placeholder="MIT Username">
	    <button type="submit" class="btn btn-primary btn-small">Sign-in</button>
	  </form>
	</div>
	<div>
	  <h3>Movie & Game Checkout</h3>
	  <hr>
	  <form class="form-inline">
	    <input type="text" class="input span4" placeholder="Title">
	    <label>and</label>
	    <input type="text" class="input span4" placeholder="Resident">
	    <button type="submit" class="btn btn-primary btn-small">Checkout</button>
	  </form>
	</div>
      </div>

      <div class="span6">
	<h3>Package Management</h3>
	<hr>
	<form id="packageForm" class="form-inline">
	  <input type="text" class="input span4" placeholder="Search...">
	  <select class="span2">
	    <option>Bin</option>
	    <option>A</option>
	    <option>B</option>
	    <option>C</option>
	    <option>D</option>
	    <option>Floor</option>
	  </select>
	  <label class="checkbox">
	    Perishable<input type="checkbox">
	  </label>
	  <div class="pull-right">
	    <button class="btn btn-success btn-small" data-toggle="modal" href="#scanPackage">Scan Package</button>
	    <button class="btn btn-danger btn-small">Submit</button>
	  </div>
	</form>
	
	<table class="table table-striped table-condensed">
	  <thead>
	    <tr> 
	      <th></th><th>Name</th><th>Bins</th>
	    </tr>
	  </thead>
	  <tbody>
	    {% for r in packages %}
	    <tr>
	      <td>{% if r.perishable %}<icon class="icon-leaf"></icon>{% endif %} </td>
	      <td>{{r.recipient.user.first_name}} {{r.recipient.user.last_name}}</td>
	      <td>{{r.location}}</td>
	      <td>
		<button class="btn btn-small pull-right">Release</button>
	      </td>
	    </tr>
	    {% endfor  %}
	  </tbody>
	</table>
	<p><icon class="icon-leaf"></icon> = Perishable</p>
      </div>      
    </div>
  </div>
  
  <div class="tab-pane" id="packages">
    <div class="alert alert-success fade in">
      <a class="close" data-dismiss="alert">×</a>
      The success of a package submission will display here.
    </div>
    <div class="row-fluid">
      <form class="form-inline">
	<input type="text" id="firstname" name="firstname" class="input span7" placeholder="Search...">
	<select>
	  <option>Bin</option>
	  <option>A</option>
	  <option>B</option>
	  <option>C</option>
	  <option>D</option>
	  <option>Floor</option>
	</select>
	<label class="checkbox">
	  Perishable<input type="checkbox">
	</label>
	<div class="pull-right">
	  <button class="btn btn-success" data-toggle="modal" href="#scanPackage">Scan Package</button>
	  <button class="btn btn-danger">Submit</button>
	</div>
      </form>   
      <table>
	<tbody id="results" name="results"></tbody>
      </table>
    </div>

    <table class="table table-striped table-condensed">
      <thead>
	<tr> 
	  <th></th><th>Name</th><th>Username</th><th>Room</th><th>Bin</th>
	</tr>
      </thead>
      <tbody>
	{% for r in packages %}
	<tr>
	  <td>{% if r.perishable %}<icon class="icon-leaf"></icon>{% endif %} </td>
	  <td>{{r.recipient.user.first_name}} {{r.recipient.user.last_name}}</td>
	  <td>{{r.recipient}}</td>
	  <td>{{r.recipient.room}}</td>
	  <td>{{r.location}}</td>
	  <td>
	    <button class="btn btn-small pull-right">Release</button>
	  </td>
	</tr>
	{% endfor  %}
      </tbody>
    </table>
  </div>

  <div class="tab-pane" id="guest_list">...</div>
  <div class="tab-pane" id="checkout">...</div>
</div>

<div class="modal fade" id="scanPackage">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Package Scan</h3>
  </div>
  <div class="modal-body">
    <p>This is where desk workers will be prompted to scan a package.</p>
  </div>

  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
    <a href="#" class="btn btn-primary" data-dismiss="modal">Save</a>
  </div>
</div>

</div>

<script type="text/javascript">
function userToHTML(user) {
$(function() {
     $(".collapse").collapse(); 
     $("#myTab").tab('show');
     $("#scanPackage").modal('hidden');
     $(".alert").alert();
});

</script>

{% endblock %}
